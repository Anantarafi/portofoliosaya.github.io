const translations = {
    id: {
        'page-title': 'Portofolio - Irsyada Rafi Ananta',
        'meta-description': 'Portfolio Irsyada Rafi Ananta - Graphic Design & UI/UX Designer dengan pengalaman dalam pengembangan web dan desain digital',
        'nav-home': 'Beranda','nav-about': 'Tentang','nav-skills': 'Keahlian','nav-projects': 'Proyek','nav-contact': 'Kontak',
        'hero-greeting': 'Halo, Saya','hero-role': 'Graphic Design & UI/UX Designer',
        'hero-description': 'Saya menciptakan pengalaman digital yang menakjubkan dengan desain yang menarik.',
        'btn-view-projects': 'Lihat Proyek','btn-contact-me': 'Hubungi Saya',
        'about-title': 'Tentang Saya',
        'about-description': 'Fresh graduate D3 Teknik Informatika dengan pengalaman magang sebagai Fullstack Developer. Terampil dalam pengembangan aplikasi web end-to-end menggunakan PHP, CodeIgniter, dan JavaScript. Memiliki semangat tinggi dalam merancang antarmuka (UI/UX) yang intuitif dan fungsional menggunakan Figma untuk memberikan pengalaman pengguna terbaik.',
        'skills-title': 'Keahlian',
        'projects-title': 'Proyek Saya',
        'filter-all': 'Semua','filter-ui-ux': 'UI/UX','filter-web': 'Website','filter-design': 'Desain',
        'search-placeholder': 'Cari proyek...','search-no-results': 'Tidak ada proyek yang ditemukan.','search-try-different': 'Coba kata kunci yang berbeda atau pilih kategori lain.',
        'btn-view-details': 'Lihat Detail','btn-download': 'Download','btn-share': 'Bagikan','btn-close': 'Tutup',
        'project-craft-title': 'UI/UX Kerajinan Tradisional','project-craft-desc': 'Desain antarmuka aplikasi untuk promosi kerajinan tradisional dengan konsep modern yang mempertahankan nilai budaya.',
        'project-food-title': 'UI/UX Pemesanan Makanan','project-food-desc': 'Aplikasi pemesanan makanan dengan antarmuka yang user-friendly dan proses checkout yang mudah.',
        'project-car-title': 'UI/UX Website Modifikasi Mobil','project-car-desc': 'Website untuk layanan modifikasi mobil dengan galeri showcase dan sistem booking online.',
        'project-banner-title': 'Desain Banner','project-banner-desc': 'Desain banner untuk peringatan Hari Santri dengan konsep modern dan religius.',
        'project-ui-title': 'UI/UX Design','project-ui-desc': 'Perancangan antarmuka pengguna yang intuitif dan modern menggunakan Figma.',
        'project-poster-title': 'Poster','project-poster-desc': 'Desain poster promosi dengan visual yang menarik dan informatif.',
        'project-web-title': 'Website','project-web-desc': 'Pengembangan aplikasi web fullstack dengan fitur lengkap dan responsif.',
        'project-poster2-title': 'Poster','project-poster2-desc': 'Desain poster kreatif dengan konsep yang unik dan eye-catching.',
        'tech-figma': 'Figma','tech-photoshop': 'Adobe Photoshop','tech-php': 'PHP','tech-codeigniter':'CodeIgniter','tech-javascript':'JavaScript','tech-mysql':'MySQL',
        'project-description-title': 'Deskripsi Proyek','project-technologies':'Teknologi yang Digunakan','project-category':'Kategori',
        'contact-title': 'Hubungi Saya','contact-subtitle': 'Mari Berkolaborasi!','contact-description':'Saya selalu tertarik dengan proyek-proyek menarik. Mari diskusikan bagaimana kita bisa bekerja sama.',
        'form-name': 'Nama Anda','form-email':'Email Anda','form-message':'Pesan Anda','btn-send':'Kirim Pesan',
        'footer-text': 'Â© 2025 Irsyada Rafi Ananta. All rights reserved.',
        'loading': 'Memuat...','form-error-fields':'Mohon isi semua field yang diperlukan.','form-error-email':'Mohon masukkan email valid.','form-error-message':'Pesan terlalu pendek.',
        'form-success':'Terima kasih! Pesan Anda telah dikirim.'
    },
    en: {
        'page-title': 'Portfolio - Irsyada Rafi Ananta',
        'meta-description': 'Portfolio of Irsyada Rafi Ananta - Graphic Design & UI/UX Designer with experience in web development and digital design',
        'nav-home': 'Home','nav-about': 'About','nav-skills': 'Skills','nav-projects': 'Projects','nav-contact': 'Contact',
        'hero-greeting': 'Hello, I\'m','hero-role': 'Graphic Design & UI/UX Designer',
        'hero-description': 'I create amazing digital experiences with attractive and functional designs.',
        'btn-view-projects': 'View Projects','btn-contact-me': 'Contact Me',
        'about-title': 'About Me',
        'about-description': 'Fresh graduate of D3 Informatics Engineering with internship experience as a Fullstack Developer. Skilled in end-to-end web application development using PHP, CodeIgniter, and JavaScript. Passionate about designing intuitive and functional UI/UX with Figma to deliver great user experience.',
        'skills-title': 'My Skills',
        'projects-title': 'My Projects',
        'filter-all': 'All','filter-ui-ux': 'UI/UX','filter-web': 'Website','filter-design': 'Design',
        'search-placeholder':'Search projects...','search-no-results':'No projects found.','search-try-different':'Try different keywords or pick another category.',
        'btn-view-details':'View Details','btn-download':'Download','btn-share':'Share','btn-close':'Close',
        'project-craft-title':'UI/UX Traditional Crafts','project-craft-desc':'Interface design for promoting traditional crafts with modern concept preserving culture.',
        'project-food-title':'UI/UX Food Ordering','project-food-desc':'Food ordering app with user-friendly interface and smooth checkout.',
        'project-car-title':'UI/UX Car Modification Website','project-car-desc':'Website for car modification services with showcase gallery and online booking.',
        'project-banner-title':'Banner Design','project-banner-desc':'Banner design for Santri Day with modern and religious concept.',
        'project-ui-title':'UI/UX Design','project-ui-desc':'Intuitive and modern UI design using Figma.',
        'project-poster-title':'Poster','project-poster-desc':'Promotional poster with attractive and informative visuals.',
        'project-web-title':'Website','project-web-desc':'Fullstack web application development with complete responsive features.',
        'project-poster2-title':'Poster','project-poster2-desc':'Creative poster with unique and eye-catching concept.',
        'tech-figma':'Figma','tech-photoshop':'Adobe Photoshop','tech-php':'PHP','tech-codeigniter':'CodeIgniter','tech-javascript':'JavaScript','tech-mysql':'MySQL',
        'project-description-title': 'Project Description','project-technologies':'Technologies Used','project-category':'Category',
        'contact-title':'Contact Me','contact-subtitle':'Let\'s Collaborate!','contact-description':'I\'m always interested in exciting projects. Let\'s work together.',
        'form-name':'Your Name','form-email':'Your Email','form-message':'Your Message','btn-send':'Send Message',
        'footer-text':'Â© 2025 Irsyada Rafi Ananta. All rights reserved.',
        'loading':'Loading...','form-error-fields':'Please fill all required fields.','form-error-email':'Please enter a valid email.','form-error-message':'Message too short.',
        'form-success':'Thank you! Your message has been sent.'
    }
};

class LanguageManager {
    constructor() {
        this.currentLanguage = this.detectLanguage();
        this.init();
    }
    detectLanguage() {
        const saved = localStorage.getItem('preferred-language');
        if (saved && translations[saved]) return saved;
        const browser = navigator.language.slice(0,2);
        return translations[browser] ? browser : 'id';
    }
    init() {
        this.updateLanguage(this.currentLanguage);
        this.setupSwitcher();
    }
    setupSwitcher() {
        const btn = document.getElementById('language-toggle');
        if (!btn) return;
        btn.addEventListener('click', () => this.switchLanguage());
    }
    switchLanguage() {
        const btn = document.getElementById('language-toggle');
        btn.classList.add('loading');
        const newLang = this.currentLanguage === 'id' ? 'en' : 'id';
        setTimeout(() => {
            this.updateLanguage(newLang);
            btn.classList.remove('loading');
        },250);
    }
    updateLanguage(lang) {
        if (!translations[lang]) return;
        this.currentLanguage = lang;
        localStorage.setItem('preferred-language', lang);
        document.documentElement.lang = lang;

        document.querySelectorAll('[data-translate]').forEach(el => {
            const key = el.getAttribute('data-translate');
            const value = translations[lang][key];
            if (!value) return;
            if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                el.placeholder = value;
            } else {
                if (el.innerHTML.includes('class="highlight"')) {
                    const highlight = el.querySelector('.highlight')?.textContent || '';
                    el.innerHTML = value + ' <span class="highlight">' + highlight + '</span>';
                } else {
                    el.textContent = value;
                }
            }
        });

        const flag = document.querySelector('.flag-icon');
        const text = document.querySelector('.lang-text');
        if (flag && text) {
            if (lang === 'id') {
                flag.textContent = 'ðŸ‡®ðŸ‡©';
                text.textContent = 'ID';
            } else {
                flag.textContent = 'ðŸ‡ºðŸ‡¸';
                text.textContent = 'EN';
            }
        }

        document.title = translations[lang]['page-title'];
        const metaDesc = document.querySelector('meta[name="description"]');
        if (metaDesc) metaDesc.content = translations[lang]['meta-description'];
    }
    translate(key) { return translations[this.currentLanguage][key] || key; }
}

document.addEventListener('DOMContentLoaded', () => {
    window.languageManager = new LanguageManager();
});
